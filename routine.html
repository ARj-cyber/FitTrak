<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routine Page</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>Routine Page</h1>
        <form id="routineForm">
            <label for="routineName">Routine Name:</label>
            <input type="text" id="routineName" name="routineName" required><br><br>

            <label for="exercise">Exercise:</label>
            <select id="exercise" name="exercise" required>
                <!-- Exercise options will be populated dynamically using JavaScript -->
            </select><br><br>

            <label for="sets">Sets:</label>
            <input type="number" id="sets" name="sets" required><br><br>

            <label for="weight">Weight (optional):</label>
            <input type="number" id="weight" name="weight"><br><br>

            <label for="time">Time (minutes, optional):</label>
            <input type="number" id="time" name="time"><br><br>

            <input type="submit" value="Add to Routine">
        </form>

        <h2>Added Routines:</h2>
        <table id="routineTable">
            <thead>
                <tr>
                    <th>Routine Name</th>
                    <th>Exercise</th>
                    <th>Sets</th>
                    <th>Weight</th>
                    <th>Time</th>
                </tr>
            </thead>
            <tbody>
                <!-- Routine data will be populated dynamically using JavaScript -->
            </tbody>
        </table>
    </div>

    <script>
        // Retrieve exercises from localStorage and populate the dropdown
        var storedExercises = JSON.parse(localStorage.getItem('exercises')) || [];
        var exerciseDropdown = document.getElementById('exercise');

        storedExercises.forEach(function(exercise) {
            if (exercise.sets || exercise.weight || exercise.time) {
                var option = document.createElement('option');
                option.value = exercise.name;
                option.textContent = exercise.name;
                exerciseDropdown.appendChild(option);
            }
        });

        document.getElementById('routineForm').addEventListener('submit', function(event) {
            event.preventDefault();

            var routineName = document.getElementById('routineName').value;
            var selectedExerciseName = document.getElementById('exercise').value;
            var sets = document.getElementById('sets').value;
            var weight = document.getElementById('weight').value;
            var time = document.getElementById('time').value;

            // Find the selected exercise from stored exercises
            var selectedExercise = storedExercises.find(function(exercise) {
                return exercise.name === selectedExerciseName;
            });
            if (selectedExercise) {
                // Check if Sets, Weight, and Time are required for the selected exercise
                if ((!selectedExercise.sets && sets) || (!selectedExercise.weight && weight) || (!selectedExercise.time && time)) {
                    alert('Invalid input for the selected exercise. Please check the requirements.');
                } else {
                    // Add the routine to the table
                    var routineTable = document.getElementById('routineTable').getElementsByTagName('tbody')[0];
                    var newRow = routineTable.insertRow();
                    newRow.insertCell().textContent = routineName;
                    newRow.insertCell().textContent = selectedExerciseName;
                    newRow.insertCell().textContent = sets;
                    newRow.insertCell().textContent = weight;
                    newRow.insertCell().textContent = time;

                    // Clear the form fields
                    document.getElementById('routineName').value = '';
                    document.getElementById('exercise').value = '';
                    document.getElementById('sets').value = '';
                    document.getElementById('weight').value = '';
                    document.getElementById('time').value = '';
                }
            } else {
                alert('Invalid exercise selected.');
            }
        });
    </script>
</body>

</html>